{"version":3,"sources":["../../src/pages/order/order.module.ts","../../src/pages/order/order.ts","../../src/shared/index.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { OrderPage } from './order';\n\n@NgModule({\n  declarations: [\n    OrderPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OrderPage),\n  ],\n})\nexport class OrderPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order/order.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ActionSheetController, AlertController } from 'ionic-angular';\nimport { SessionService, ContractService, OrderService, MoneyService } from '../../shared/index';\n\n@IonicPage()\n@Component({\n  selector: 'page-order',\n  templateUrl: 'order.html',\n})\nexport class OrderPage {\n  private order: string = 'buy';\n  private isSearchOn: boolean = false;\n  private contract = \"null\";\n  private user;\n  private Session;\n  private MoneyInfo;\n  private price = 0;\n  private vol = 0;\n  private contractInfo = null;\n  private type = 'LO';\n  priceStop = 0;\n  fee = 0;\n  totalValue = 0;\n  margin = 0;\n  ref = 0;\n  ceil = 0;\n  fl = 0;\n\n  isStopOrder = false;\n  private listContract;\n  private lenh: ORDER;\n\n  private listSell = [\n    { Price: '15.700', Vol: '7.800' },\n    { Price: '15.700', Vol: '7.800' },\n    { Price: '15.700', Vol: '7.800' },\n    { Price: '15.700', Vol: '7.800' },\n    { Price: '15.700', Vol: '7.800' }\n  ];\n\n  private listBuy = [\n    { Price: '15.700', Vol: '7.800' },\n    { Price: '15.700', Vol: '7.800' },\n    { Price: '15.700', Vol: '7.800' },\n    { Price: '15.700', Vol: '7.800' },\n    { Price: '15.700', Vol: '7.800' }\n  ];\n  constructor(public navCtrl: NavController,\n    public actionSheetCtrl: ActionSheetController,\n    private alertCtrl: AlertController,\n    private _sessionService: SessionService,\n    private _contractService: ContractService,\n    private _orderService: OrderService,\n    private _moneyService: MoneyService) {\n  }\n\n  ngOnInit() {\n    this.user = JSON.parse(localStorage.getItem('user'));\n    console.log(this.user);\n    this._sessionService.GetSession().subscribe((response: any) => {\n      this.Session = response;\n      console.log(this.Session);\n      this._moneyService.getMoneyInfo(this.user.userID).subscribe((response: any) => {\n        this.MoneyInfo = response;\n      });\n      this._contractService.GetContracts().subscribe((response: any) => {\n        this.listContract = response;\n        console.log(this.listContract);\n      });\n      // this._orderService.getListLenhTrongPhien(this.user.userID).subscribe((response: any) => {\n      //   this.ListLenhTrongPhien = response;\n      // });\n    }, (error) => {\n      const alert = this.alertCtrl.create({\n        title: 'Phiên chưa mở!',\n        subTitle: 'Chức năng đặt lệnh không khả dụng!',\n        buttons: ['OK']\n      });\n      alert.present();\n    });\n  }\n\n  toggleDetails() {\n    this.isSearchOn = !this.isSearchOn;\n  }\n\n  stpSelect() {\n    console.log('STP selected');\n  }\n\n  goMenuPage(): void {\n    this.navCtrl.setRoot('MenuPage');\n  }\n\n  onChangeContract(val) {\n    this.contract = val;\n    this.contractInfo = this.listContract.find(x => x.CONTRACTID === +val);\n    this.price = this.price === 0 ? this.contractInfo.STARTPRICE : this.price;\n    this.vol = 1;\n    this.ref = +this.contractInfo.STARTPRICE;\n    this.ceil = this.ref * (1 + this.contractInfo.PRICERANGE / 100);\n    this.fl = this.ref * (1 - this.contractInfo.PRICERANGE / 100);\n    console.log(this.contractInfo);\n    this.updateInfo();\n  }\n\n  onChangePrice(val) {\n    console.log(val);\n    this.updateInfo();\n  }\n  onChangeVol(val) {\n    console.log('Vol: ' + val);\n    this.updateInfo();\n  }\n  updateInfo() {\n    this.fee = this.vol * this.contractInfo.FEE;\n    this.totalValue = this.vol * this.price * this.contractInfo.UNITPERLOT;\n    this.margin = this.totalValue * this.contractInfo.MONEYMARGIN / 100;\n    console.log(this.fee + ' ' + this.totalValue + ' ' + this.margin);\n  }\n\n  isValidForm() {\n    return this.contractInfo != null;\n  }\n  onSubmit(side) {\n    console.log(side);\n    this.lenh = new ORDER();\n    this.lenh.ContractID = +this.contract;\n    this.lenh.Price = this.price;\n    this.lenh.Vol = this.vol;\n    this.lenh.Type = this.type;\n    this.lenh.Side = side;\n    this.lenh.RefPrice = this.contractInfo.STARTPRICE;\n    this.lenh.BankCode = '';\n    this.lenh.Fee = this.fee;\n    this.lenh.Margin = this.margin;\n\n    if (this.isStopOrder) {\n      this.lenh.Status = -1;\n      this.lenh.PriceMatch = this.priceStop;\n    } else {\n      this.lenh.Status = 0;\n      this.lenh.PriceMatch = 0;\n    }\n    const alert = this.alertCtrl.create({\n      title: 'Xác nhận lệnh đặt?',\n      message: `<div class=\"row\">\n        <div>\n          Mã Hợp đồng <strong> ${this.contractInfo.CONTRACTCODE} </strong>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div>\n          Loại GD <strong> ${this.type} </strong>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div>\n          Loại lệnh <strong> ${this.lenh.Side === 'BUY' ? 'MUA' : 'BÁN'} </strong>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div>\n          Khối lượng <strong> ${this.lenh.Vol} </strong>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div>\n          Giá đặt <strong> ${this.lenh.Price} </strong>\n        </div>\n      </div>\n      `,\n      buttons: [\n        {\n          text: 'Hủy bỏ',\n          handler: () => {\n            console.log('Cancel.');\n          }\n        },\n        {\n          text: 'Xác nhận',\n          handler: () => {\n            this.lenh.SessionID = this.Session.sessionid;\n            this.lenh.UserID = this.user.userID;\n            this.lenh.createBy = this.user.userName;\n            this._orderService.Add(this.lenh).subscribe((response: any) => {\n              const alert = this.alertCtrl.create({\n                title: 'Đặt lệnh!',\n                subTitle: 'Thành công!',\n                buttons: ['OK']\n              });\n              alert.present();\n              // this.loadListLenh();\n            }, (error) => {\n              const alert = this.alertCtrl.create({\n                title: 'Đặt lệnh!',\n                subTitle: 'Đã có lỗi xảy ra!',\n                buttons: ['OK']\n              });\n              alert.present();\n            });\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n}\n\nexport class ORDER {\n  Vol: number;\n  Margin: number;\n  Price: number;\n  PriceMatch: number;\n  Side: string;\n  Type: string;\n  UserID: number;\n  ContractID: number;\n  SessionID: number;\n  OrderID: number;\n  BankCode: string;\n  RefPrice: number;\n  Fee: number;\n  Status: number;\n  createBy: string;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order/order.ts","export * from './contract.service';\r\nexport * from './order.service';\r\nexport * from './session.service';\r\nexport * from './money.service';\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/index.ts"],"sourceRoot":""}